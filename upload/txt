设置信号量：
缓存区1无数据，empty1，初值为1，即有empty1=1；
缓存区1有数据，full1，初值为0，即有full1=0；
缓存区2无数据，empty2，初值为1，即有empty2=1；
缓存区2有数据，full2，初值为0，即有full2=0；
设存在信号量mutex1=1，mutex=1；
int buffer1,buffer2;

(1):
P()
{
	While(1)
	{
		输入数据
		P(empty1);
		P(mutex1);
		向缓冲区A写数据;
		V(mutex1);
		V(full);
	} 
}

Q()
{
	While(1)
	{
		P(full1)
		P(mutex1);
		从缓冲区A读数据;
		V(mutex1);
		V(empty1);
		加工数据
		P(empty2);
		P(mutex2);
		向缓冲区B写数据;
		V(mutex2);
		V(full);
	}   
}

R()
{
	While(1)
	{
		P(full2);
		P(mutex2));
		从缓冲区B读数据;
		V(mutex2));
		V(empty2)；
		打印输出;
	}   
}

(2):
Var buffer1,buffer2
Begin int empty1=m, empty2=n,mutex=1;
其余数据与(1)中相同.

P:    
{
repeat
从设备读入数据;
P(empty1);
P(mutex);
放入缓冲池 buffer1;
V(mutex);
V(full1);
}



